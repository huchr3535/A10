<!DOCTYPE html by Chul Huh>
<html lang="en">
  <head>
    <title>Simple Cookie Test</title>
  </head>
  <body>
    <h1>Cookie Test</h1>
    <p>Click the button to set or check a cookie.</p>
    <button onclick="checkCookie()">Set or Check Cookie</button>
    <p id="cookie-info"></p>

    <script>
      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
        document.cookie = `${cname}=${cvalue};expires=${d.toUTCString()};path=/`;
        console.log("Cookie set:", document.cookie);
      }

      function getCookie(cname) {
        const name = cname + "=";
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookies = decodedCookie.split(";");
        for (let i = 0; i < cookies.length; i++) {
          let c = cookies[i].trim();
          if (c.indexOf(name) === 0) {
            return c.substring(name.length);
          }
        }
        return "";
      }

      function checkCookie() {
        let user = getCookie("username");
        if (user) {
          document.getElementById(
            "cookie-info"
          ).innerText = `Welcome back, ${user}!`;
        } else {
          user = prompt("Please enter your name:", "");
          if (user) {
            setCookie("username", user, 365);
            document.getElementById(
              "cookie-info"
            ).innerText = `Hello, ${user}! Your name has been saved as a cookie.`;
          }
        }
      }

      window.onload = function () {
        const user = getCookie("username");
        if (user) {
          document.getElementById(
            "cookie-info"
          ).innerText = `Welcome back, ${user}!`;
        } else {
          document.getElementById("cookie-info").innerText =
            "No username cookie found. Click the button to set it.";
        }
      };
    </script>
  </body>
</html>
